<!DOCTYPE html>
<div class="backbar" style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
  <button class="back" onclick="history.back()" style="padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.06);color:#fff;cursor:pointer">‚Üê Back</button>
</div>
<html lang="en">
<head>
  <link rel="stylesheet" href="ugly.css">
  <meta charset="UTF-8">
  <title>Games | GEAR HUB (HTML)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root { --bg:#020617; --panel:rgba(15,23,42,0.6); --text:#F8FAFC; }
    body { margin:0; font-family: Inter, system-ui, sans-serif; background: var(--bg); color: var(--text); }
    .app { display:flex; height:100vh; }
    .aside { width:280px; background: rgba(15,23,42,0.4); backdrop-filter: blur(24px); border-right:1px solid rgba(255,255,255,0.06); display:flex; flex-direction:column; }
    .main { flex:1; display:flex; flex-direction:column; }
    .header { height:80px; display:flex; align-items:center; justify-content:space-between; padding:0 24px; border-bottom:1px solid rgba(255,255,255,0.08); background: rgba(2,6,23,0.6); backdrop-filter: blur(16px); position:sticky; top:0; }
    .content { flex:1; overflow:auto; padding:24px; }
    .grid { display:grid; grid-template-columns: repeat(4,minmax(220px,1fr)); gap:12px; }
    .glass { background: var(--panel); backdrop-filter: blur(24px); border:1px solid rgba(255,255,255,0.08); border-radius: 24px; box-shadow: 0 10px 40px -10px rgba(6,182,212,0.25); padding: 24px; }
    .card { text-align:center; cursor:pointer; }
    .btn { padding:8px 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.12); background: rgba(6,182,212,0.2); color:#fff; cursor:pointer; }
    .centered { display:flex; justify-content:center; padding-top:12px; }
    .input { width: 100%; padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(2,6,23,0.6); color: #fff; }
  </style>
</head>
<body>
  <div class="app">
    <aside class="aside">
      <div style="padding:24px; display:flex; align-items:center; gap:12px;">
        <div style="width:40px;height:40px;background:linear-gradient(135deg,#06b6d4,#3b82f6);border-radius:12px;display:flex;align-items:center;justify-content:center;">‚¨¢</div>
        <div><div style="font-weight:700">GEAR HUB</div></div>
      </div>
      <nav style="padding:12px; overflow:auto">
        <button class="btn" onclick="location.href='dashboard.html'">üè† Dashboard</button>
        <button class="btn" onclick="location.href='games.html'">üéÆ Games</button>
      </nav>
      <div style="margin-top:auto;padding:16px"><button class="btn" onclick="logout()">Sign Out</button></div>
    </aside>

    <main class="main">
      <header class="header"><h2>Arcade Zone</h2><button class="btn" onclick="showMenu()">Back to Arcade</button></header>
      <div class="content" id="root">
        <div class="grid" id="catalog"></div>
      </div>
    </main>
  </div>

  <script>
    const ACTIVE_SESSION_KEY='gearhub_active_session'; const user=JSON.parse(localStorage.getItem(ACTIVE_SESSION_KEY)||'null'); if(!user) location.href='login.html';
    function logout(){ localStorage.removeItem(ACTIVE_SESSION_KEY); location.href='login.html'; }
    function addXP(a){ const u=user; const newXP=(u.xp||0)+a; const newLevel=Math.floor(Math.sqrt(newXP/100))+1; u.xp=newXP; u.level=newLevel; localStorage.setItem(ACTIVE_SESSION_KEY, JSON.stringify(u)); }

    const GAMES = [
      { id:'math', name:'Math Sprint', minLevel:1 },
      { id:'tictactoe', name:'Tic Tac Toe', minLevel:1 },
      { id:'snake', name:'Neon Snake', minLevel:1 },
      { id:'pong', name:'Cyber Pong', minLevel:2 }
    ];

    function showMenu(){
      const cat = document.getElementById('catalog'); cat.innerHTML='';
      GAMES.forEach(g=>{
        const locked = (user.level||1) < g.minLevel;
        const card = document.createElement('div'); card.className='glass card';
        card.innerHTML = `<h3>${g.name}</h3><div class="centered">${locked?'<span style="color:#94a3b8">Locked (Lvl '+g.minLevel+')</span>':'<button class="btn">Play</button>'}</div>`;
        if(!locked) card.querySelector('.btn').onclick = ()=>startGame(g.id);
        cat.appendChild(card);
      });
    }

    function startGame(id){
      const root=document.getElementById('root');
      if(id==='math') return renderMath(root);
      if(id==='tictactoe') return renderTTT(root);
      if(id==='snake') return renderSnake(root);
      if(id==='pong') return renderPong(root);
    }

    function renderMath(root){
      root.innerHTML = `<div class="glass" style="max-width:520px;margin:0 auto;text-align:center">
        <h3>Math Sprint</h3><div id="hud" style="font-weight:700">Score: 0 | Time: 30s</div>
        <div id="q" style="font-size:28px;font-weight:800;margin:12px 0">Press Start</div>
        <div id="opts"></div><div class="centered"><button class="btn" id="start">Start</button></div></div>`;
      let score=0, time=30, active=false, timer=null;
      const hud=document.getElementById('hud'), qEl=document.getElementById('q'), opts=document.getElementById('opts');
      function gen(){ const a=rand(1,12), b=rand(1,12), ans=a+b; qEl.textContent=`${a} + ${b} = ?`; const choices=shuffle([ans, ans+1, ans-1, ans+2]); opts.innerHTML=''; choices.forEach(c=>{ const b=document.createElement('button'); b.className='btn'; b.style.margin='4px'; b.textContent=c; b.onclick=()=>{ if(c===ans){score+=10; gen();} else score=Math.max(0, score-5); hud.textContent=`Score: ${score} | Time: ${time}s`; }; opts.appendChild(b); }); }
      document.getElementById('start').onclick=()=>{ score=0; time=30; active=true; hud.textContent=`Score: ${score} | Time: ${time}s`; gen(); timer=setInterval(()=>{ time--; hud.textContent=`Score: ${score} | Time: ${time}s`; if(time<=0){ clearInterval(timer); active=false; addXP(Math.ceil(score/2)); alert('Time up! Score: '+score); } }, 1000); };
      function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
      function shuffle(a){ return a.sort(()=>Math.random()-0.5); }
    }

    function renderTTT(root){
      root.innerHTML = `<div class="glass" style="max-width:420px;margin:0 auto;text-align:center">
        <h3>Tic Tac Toe</h3>
        <div id="grid" style="display:grid; grid-template-columns: repeat(3,100px); gap:6px; justify-content:center"></div>
        <div class="centered"><button class="btn" id="reset">Reset</button></div></div>`;
      const grid=document.getElementById('grid'); let board=Array(9).fill(null), turn='X';
      function render(){ grid.innerHTML=''; board.forEach((v,i)=>{ const b=document.createElement('button'); b.className='btn'; b.style.width='100px'; b.style.height='100px'; b.textContent=v||''; b.onclick=()=>move(i); grid.appendChild(b); }); }
      function move(i){ if(board[i]) return; board[i]=turn; turn=turn==='X'?'O':'X'; const win=winner(); if(win){ alert(win+' wins!'); addXP(5); } render(); }
      function winner(){ const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]; for(const [a,b,c] of lines){ if(board[a] && board[a]===board[b] && board[a]===board[c]) return board[a]; } return null; }
      render(); document.getElementById('reset').onclick=()=>{ board=Array(9).fill(null); turn='X'; render(); };
    }

    function renderSnake(root){
      root.innerHTML = `<div class="glass" style="max-width:460px;margin:0 auto;text-align:center">
        <h3>Neon Snake</h3><div id="hud">Score: 0</div>
        <div id="board" style="width:400px;height:400px;background:#0f172a;border-radius:12px;margin:8px auto;position:relative"></div></div>`;
      const board=document.getElementById('board'); let snake=[{x:10,y:10}], food={x:15,y:15}, dir={x:0,y:0}, score=0, over=false;
      window.addEventListener('keydown', e=>{ if(over) return; if(e.key==='ArrowUp' && dir.y===0) dir={x:0,y:-1}; if(e.key==='ArrowDown'&& dir.y===0) dir={x:0,y:1}; if(e.key==='ArrowLeft'&& dir.x===0) dir={x:-1,y:0}; if(e.key==='ArrowRight'&& dir.x===0) dir={x:1,y:0}; });
      const t=setInterval(()=>{ if(over || (!dir.x && !dir.y)) return render(); const head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};
        if(head.x<0||head.x>=20||head.y<0||head.y>=20||snake.some(s=>s.x===head.x && s.y===head.y)){ over=true; addXP(Math.ceil(score/2)); alert('Game Over. Score: '+score); }
        snake=[head,...snake]; if(head.x===food.x && head.y===food.y){ score++; food={x:Math.floor(Math.random()*20), y:Math.floor(Math.random()*20)}; } else snake.pop();
        render(); },150);
      function render(){ board.innerHTML=''; snake.forEach((s,i)=>{ const d=document.createElement('div'); d.style.position='absolute'; d.style.left=s.x*20+'px'; d.style.top=s.y*20+'px'; d.style.width='20px'; d.style.height='20px'; d.style.background='#22d3ee'; d.style.opacity=1 - i/(snake.length+5); board.appendChild(d); }); const f=document.createElement('div'); f.style.position='absolute'; f.style.left=food.x*20+'px'; f.style.top=food.y*20+'px'; f.style.width='20px'; f.style.height='20px'; f.style.background='#ef4444'; board.appendChild(f); document.getElementById('hud').textContent='Score: '+score; }
      render();
    }

    function renderPong(root){
      root.innerHTML = `<div class="glass" style="max-width:560px;margin:0 auto;text-align:center">
        <h3>Cyber Pong</h3>
        <div id="board" style="width:500px;height:300px;background:#0f172a;border-radius:12px;margin:8px auto;position:relative;overflow:hidden"></div>
        <button class="btn" id="start">Start Match</button></div>`;
      const board=document.getElementById('board'); let ball={x:250,y:150,dx:2,dy:2}, p1=120, p2=120, score={p1:0,p2:0}, active=false;
      board.onmousemove = (e)=>{ const rect=board.getBoundingClientRect(); const y=e.clientY-rect.top; p1=Math.min(240, Math.max(0,y-30)); };
      function render(){ board.innerHTML=''; // mid line
        const mid=document.createElement('div'); mid.style.position='absolute'; mid.style.left='250px'; mid.style.top='0'; mid.style.bottom='0'; mid.style.borderRight='1px dashed rgba(255,255,255,0.2)'; board.appendChild(mid);
        const pad1=document.createElement('div'); pad1.style.position='absolute'; pad1.style.left='6px'; pad1.style.top=p1+'px'; pad1.style.width='8px'; pad1.style.height='60px'; pad1.style.background='#06b6d4'; board.appendChild(pad1);
        const pad2=document.createElement('div'); pad2.style.position='absolute'; pad2.style.right='6px'; pad2.style.top=p2+'px'; pad2.style.width='8px'; pad2.style.height='60px'; pad2.style.background='#f472b6'; board.appendChild(pad2);
        const b=document.createElement('div'); b.style.position='absolute'; b.style.left=ball.x+'px'; b.style.top=ball.y+'px'; b.style.width='8px'; b.style.height='8px'; b.style.background='#fff'; board.appendChild(b);
      }
      function step(){
        if(!active) return;
        ball.x+=ball.dx; ball.y+=ball.dy; if(ball.y<=0||ball.y>=292) ball.dy=-ball.dy;
        if(ball.x<=14 && ball.y >= p1 && ball.y<=p1+60) ball.dx=Math.abs(ball.dx);
        if(ball.x>=478 && ball.y >= p2 && ball.y<=p2+60) ball.dx=-Math.abs(ball.dx);
        // bot
        p2 += (ball.y > p2+30) ? 1.5 : -1.5; p2=Math.max(0, Math.min(240,p2));
        if(ball.x<0){ score.p2++; resetBall(1); }
        if(ball.x>492){ score.p1++; resetBall(-1); }
        render();
      }
      function resetBall(dir){ ball={x:250,y:150,dx:2*dir,dy:2}; if(score.p1>=5||score.p2>=5){ active=false; addXP(10); alert(`Match Over ${score.p1}:${score.p2}`); score={p1:0,p2:0}; } }
      document.getElementById('start').onclick=()=>{ active=true; setInterval(step, 16); };
      render();
    }

    showMenu();
  </script>
</body>
</html>
