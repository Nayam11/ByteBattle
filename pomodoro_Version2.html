<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pomodoro | GEAR HUB (HTML)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root { --bg:#020617; --panel:rgba(15,23,42,0.6); --text:#F8FAFC; }
    body { margin:0; font-family: Inter, system-ui, sans-serif; background: var(--bg); color: var(--text); }
    .center { min-height:100vh; display:grid; place-items:center; }
    .glass { background: var(--panel); backdrop-filter: blur(24px); border:1px solid rgba(255,255,255,0.08); border-radius: 24px; box-shadow: 0 10px 40px -10px rgba(6,182,212,0.25); padding: 24px; }
    .row { display:flex; gap:12px; align-items:center; justify-content:center; }
    .btn { padding:12px; border-radius:999px; border:1px solid rgba(255,255,255,0.12); background: rgba(6,182,212,0.2); color:#fff; cursor:pointer; }
    .input { width: 100%; padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(2,6,23,0.6); color: #fff; }
  </style>
</head>
<body>
  <div class="center">
    <div class="glass" style="width:420px;text-align:center">
      <h2 id="modeLabel">Focus</h2>
      <div id="time" style="font-size:64px;font-weight:800">25:00</div>
      <div class="row" style="margin:12px 0">
        <button class="btn" onclick="toggle()">‚ñ∂Ô∏è/‚è∏Ô∏è</button>
        <button class="btn" onclick="resetTimer()">üîÑ</button>
      </div>
      <div class="row">
        <button class="btn" onclick="setMode('FOCUS')">Focus</button>
        <button class="btn" onclick="setMode('SHORT')">Short Break</button>
        <button class="btn" onclick="setMode('LONG')">Long Break</button>
      </div>
      <div style="margin-top:12px;text-align:left">
        <h3>Settings</h3>
        <label>Focus (min)<input id="sFocus" class="input" value="25"></label>
        <label>Short Break (min)<input id="sShort" class="input" value="5"></label>
        <label>Long Break (min)<input id="sLong" class="input" value="15"></label>
        <div class="row" style="justify-content:flex-end"><button class="btn" onclick="saveSettings()">Save</button></div>
      </div>
    </div>
  </div>

  <script>
    const ACTIVE_SESSION_KEY='gearhub_active_session';
    const user = JSON.parse(localStorage.getItem(ACTIVE_SESSION_KEY) || 'null'); if(!user) location.href='login.html';
    const STORAGE_KEY = `gearhub_pomodoro_settings_${user.id}`;

    const DEFAULT = { FOCUS:25, SHORT:5, LONG:15 };
    let settings = JSON.parse(localStorage.getItem(STORAGE_KEY) || 'null') || DEFAULT;

    let mode='FOCUS', isActive=false, timeLeft=settings.FOCUS*60, timer=null;

    function format(sec){ const m = String(Math.floor(sec/60)).padStart(2,'0'); const s=String(sec%60).padStart(2,'0'); return `${m}:${s}`; }
    function render(){ document.getElementById('time').textContent = format(timeLeft); document.getElementById('modeLabel').textContent = mode==='FOCUS'?'Focus':'Break'; }

    function toggle(){ isActive=!isActive; if(isActive){ timer=setInterval(()=>{ timeLeft--; render(); if(timeLeft<=0){ clearInterval(timer); isActive=false; alert('Time up!'); } }, 1000); } else { clearInterval(timer); } }
    function resetTimer(){ isActive=false; clearInterval(timer); timeLeft=settings[mode]*60; render(); }
    function setMode(m){ mode=m; resetTimer(); }
    function saveSettings(){ settings={ FOCUS:parseInt(sFocus.value)||1, SHORT:parseInt(sShort.value)||1, LONG:parseInt(sLong.value)||1 }; localStorage.setItem(STORAGE_KEY, JSON.stringify(settings)); resetTimer(); }

    document.getElementById('sFocus').value=settings.FOCUS; document.getElementById('sShort').value=settings.SHORT; document.getElementById('sLong').value=settings.LONG;
    render();
  </script>
</body>
</html>